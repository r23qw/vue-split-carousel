"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("vue3"),i=require("vue"),L=t.defineComponent({name:"SplitCarousel",props:{autoplay:{type:Boolean,default:!0},speed:{type:Number,default:500},interval:{type:Number,default:3e3},loop:{type:Boolean,default:!0},displayAmount:{type:Number,default:4},height:{type:[Number,String],default:80},itemWidth:{type:Number,default:120},pauseOnHover:{type:Boolean,default:!0},timingFunction:{type:String,default:"ease"},arrowVisible:{type:String,validator:e=>["default","always"].includes(e),default:"default"}},setup(e,n){const s=t.ref(null),a=t.ref([]),m=l=>a.value.push(l),p=l=>{const r=a.value.findIndex(A=>A.uid===l);r!==-1&&a.value.splice(r,1)},o=t.ref(0),y=t.computed(()=>{const l=(o.value-e.itemWidth*e.displayAmount)/(e.displayAmount-1),r=l+e.itemWidth;return{isStatic:a.value.length<=e.displayAmount,gapWidth:l,viewportWidth:o.value,itemWidth:e.itemWidth,itemBlockWidth:r,prependPosition:-1*r,appendPostion:o.value+l}}),c=t.ref(0),b=t.computed(()=>c.value+e.displayAmount===a.value.length),h=t.computed(()=>c.value===0),w=t.computed(()=>e.displayAmount+2>=a.value.length),f=t.reactive({resetting:!1,action:"next"}),C=t.computed(()=>{var U,V;const l=c.value,r=a.value,A=r.length-1,R=Array.from({length:e.displayAmount}).map((x,P)=>{var E;return(E=r[(l+P)%r.length])==null?void 0:E.uid}),_={prependUid:(U=r[h.value?A:l-1])==null?void 0:U.uid,stagUids:R,appendUid:(V=r[(l+e.displayAmount)%r.length])==null?void 0:V.uid};return _.prependUid===_.appendUid&&(f.action==="prev"&&(_.prependUid=-1),f.action==="next"&&(_.appendUid=-1)),_}),$=t.toRefs(e);t.provide("injectCarouselScope",{speed:$.speed,timingFunction:$.timingFunction,stag:C,reset:f,addItem:m,removeItem:p,layout:y});const g=t.computed(()=>!(e.arrowVisible==="default"&&(y.value.isStatic||h.value&&!e.loop))),k=t.computed(()=>!(e.arrowVisible==="default"&&(y.value.isStatic||b.value&&!e.loop))),I=l=>{if(y.value.isStatic||!e.loop&&(l==="next"&&b.value||l==="prev"&&h.value))return;const r=()=>{l==="next"&&(c.value=(c.value+1)%a.value.length),l==="prev"&&(c.value=h.value?a.value.length-1:c.value-1)};if(!w.value){r();return}f.resetting=!0,f.action=l,requestAnimationFrame(()=>{requestAnimationFrame(()=>{f.resetting=!1,r()})})};let u;const v=()=>{clearTimeout(u),I("next"),e.autoplay&&(u=setTimeout(()=>v(),e.interval))},d=()=>{clearTimeout(u),I("prev"),e.autoplay&&(u=setTimeout(()=>d(),e.interval))},S=()=>{e.autoplay&&e.pauseOnHover&&clearTimeout(u)},M=()=>{e.autoplay&&e.pauseOnHover&&(clearTimeout(u),u=setTimeout(()=>v(),e.interval))};t.watch(()=>e.autoplay,l=>{l?u=setTimeout(()=>v(),e.interval):clearTimeout(u)});const T=()=>{document.visibilityState==="hidden"&&clearTimeout(u),document.visibilityState==="visible"&&e.autoplay&&(u=setTimeout(()=>v(),e.interval))};return t.onMounted(()=>{t.nextTick(()=>{s.value!==null&&(o.value=s.value.clientWidth),e.autoplay&&(u=setTimeout(()=>v(),e.interval)),document.addEventListener("visibilitychange",T)})}),t.onUnmounted(()=>{clearTimeout(u),document.removeEventListener("visibilitychange",T)}),{prev:d,next:v,enter:S,leave:M,layout:y,viewportDOMRef:s,hasLeftSlot:n.slots.left!==void 0,hasRightSlot:n.slots.right!==void 0,isLeftArrowVisiable:g,isRightArrowVisiable:k,activeIndex:c,items:a}}});const B=(e,n)=>{const s=e.__vccOpts||e;for(const[a,m]of n)s[a]=m;return s},N=e=>(i.pushScopeId("data-v-d65c36fb"),e=e(),i.popScopeId(),e),O={key:1,class:"split-carousel__left-button"},q=N(()=>i.createElementVNode("div",{class:"arrow left"},null,-1)),j=[q],D={key:1,class:"split-carousel__right-button"},z=N(()=>i.createElementVNode("div",{class:"arrow right"},null,-1)),H=[z];function X(e,n,s,a,m,p){return i.openBlock(),i.createElementBlock("div",{class:"split-carousel",style:i.normalizeStyle({height:`${typeof e.height=="string"?e.height:`${e.height}px`}`})},[i.createElementVNode("div",{class:"split-carousel__left",onClick:n[0]||(n[0]=(...o)=>e.prev&&e.prev(...o))},[i.withDirectives(i.createElementVNode("div",null,[e.hasLeftSlot?i.renderSlot(e.$slots,"left",{key:0},void 0,!0):(i.openBlock(),i.createElementBlock("button",O,j))],512),[[i.vShow,e.isLeftArrowVisiable]])]),i.createElementVNode("div",{ref:"viewportDOMRef",class:i.normalizeClass(["split-carousel__viewport",{"split-carousel__viewport--static":e.layout.isStatic}]),onMouseenter:n[1]||(n[1]=(...o)=>e.enter&&e.enter(...o)),onMouseleave:n[2]||(n[2]=(...o)=>e.leave&&e.leave(...o))},[i.renderSlot(e.$slots,"default",{},void 0,!0)],34),i.createElementVNode("div",{class:"split-carousel__right",onClick:n[3]||(n[3]=(...o)=>e.next&&e.next(...o))},[i.withDirectives(i.createElementVNode("div",null,[e.hasRightSlot?i.renderSlot(e.$slots,"right",{key:0},void 0,!0):(i.openBlock(),i.createElementBlock("button",D,H))],512),[[i.vShow,e.isRightArrowVisiable]])])],4)}const W=B(L,[["render",X],["__scopeId","data-v-d65c36fb"]]),G=t.defineComponent({name:"SplitCarouselItem",setup(){let e=t.getCurrentInstance(),n=Math.random();const s=t.inject("injectCarouselScope"),a=t.ref(!1);if(!e||!s)throw new Error("SplitCarouselItem Must include by SplitCarousel");const{layout:m,stag:p,reset:o,addItem:y,removeItem:c}=s;t.onMounted(()=>{y({uid:n}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{a.value=!0})})}),t.onUnmounted(()=>{c(n)});const b=t.computed(()=>n===p.value.prependUid),h=t.computed(()=>n===p.value.appendUid),w=t.computed(()=>p.value.stagUids.findIndex(g=>g===n)),f=t.computed(()=>w.value!==-1),C=t.computed(()=>!!(!a.value||o.resetting));return{itemStyle:t.computed(()=>{const{itemWidth:g,isStatic:k,itemBlockWidth:I,appendPostion:u,prependPosition:v}=m.value;let d={width:`${g}px`,transitionDuration:`${C.value?0:s.speed.value}ms`,transitionTimingFunction:s.timingFunction.value};if(k)return d.display="block",d;if(f.value&&(d={...d,display:"block",transform:`translateX(${w.value*I}px)`}),b.value){const S=o.resetting&&o.action==="next";d={...d,display:"block",transform:`translateX(${S?u:v}px)`}}if(h.value){const S=o.resetting&&o.action==="prev";d={...d,display:"block",transform:`translateX(${S?v:u}px)`}}return d}),layout:m}}});function J(e,n,s,a,m,p){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(["split-carousel__item",{"split-carousel__item--transition":!e.layout.isStatic}]),style:i.normalizeStyle(e.itemStyle)},[i.renderSlot(e.$slots,"default",{},void 0,!0)],6)}const F=B(G,[["render",J],["__scopeId","data-v-e39df7ff"]]),K=(e,n)=>{const s=(n==null?void 0:n.prefix)||"";e.component(`${s}SplitCarousel`,W),e.component(`${s}SplitCarouselItem`,F)};exports.SplitCarousel=W;exports.SplitCarouselItem=F;exports.install=K;
