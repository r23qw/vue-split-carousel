(function(c,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue3"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vue3","vue"],t):(c=typeof globalThis<"u"?globalThis:c||self,t(c.VueSplitCarousel={},c.vue3,c.Vue))})(this,function(c,t,i){"use strict";const R=t.defineComponent({name:"SplitCarousel",props:{autoplay:{type:Boolean,default:!0},speed:{type:Number,default:500},interval:{type:Number,default:3e3},loop:{type:Boolean,default:!0},displayAmount:{type:Number,default:4},height:{type:[Number,String],default:80},itemWidth:{type:Number,default:120},pauseOnHover:{type:Boolean,default:!0},timingFunction:{type:String,default:"ease"},arrowVisible:{type:String,validator:e=>["default","always"].includes(e),default:"default"}},setup(e,n){const s=t.ref(null),a=t.ref([]),p=l=>a.value.push(l),h=l=>{const d=a.value.findIndex(T=>T.uid===l);d!==-1&&a.value.splice(d,1)},o=t.ref(0),y=t.computed(()=>{const l=(o.value-e.itemWidth*e.displayAmount)/(e.displayAmount-1),d=l+e.itemWidth;return{isStatic:a.value.length<=e.displayAmount,gapWidth:l,viewportWidth:o.value,itemWidth:e.itemWidth,itemBlockWidth:d,prependPosition:-1*d,appendPostion:o.value+l}}),m=t.ref(0),w=t.computed(()=>m.value+e.displayAmount===a.value.length),g=t.computed(()=>m.value===0),C=t.computed(()=>e.displayAmount+2>=a.value.length),v=t.reactive({resetting:!1,action:"next"}),$=t.computed(()=>{var W,F;const l=m.value,d=a.value,T=d.length-1,X=Array.from({length:e.displayAmount}).map((G,J)=>{var M;return(M=d[(l+J)%d.length])==null?void 0:M.uid}),b={prependUid:(W=d[g.value?T:l-1])==null?void 0:W.uid,stagUids:X,appendUid:(F=d[(l+e.displayAmount)%d.length])==null?void 0:F.uid};return b.prependUid===b.appendUid&&(v.action==="prev"&&(b.prependUid=-1),v.action==="next"&&(b.appendUid=-1)),b}),k=t.toRefs(e);t.provide("injectCarouselScope",{speed:k.speed,timingFunction:k.timingFunction,stag:$,reset:v,addItem:p,removeItem:h,layout:y});const S=t.computed(()=>!(e.arrowVisible==="default"&&(y.value.isStatic||g.value&&!e.loop))),A=t.computed(()=>!(e.arrowVisible==="default"&&(y.value.isStatic||w.value&&!e.loop))),I=l=>{if(y.value.isStatic||!e.loop&&(l==="next"&&w.value||l==="prev"&&g.value))return;const d=()=>{l==="next"&&(m.value=(m.value+1)%a.value.length),l==="prev"&&(m.value=g.value?a.value.length-1:m.value-1)};if(!C.value){d();return}v.resetting=!0,v.action=l,requestAnimationFrame(()=>{requestAnimationFrame(()=>{v.resetting=!1,d()})})};let r;const f=()=>{clearTimeout(r),I("next"),e.autoplay&&(r=setTimeout(()=>f(),e.interval))},u=()=>{clearTimeout(r),I("prev"),e.autoplay&&(r=setTimeout(()=>u(),e.interval))},_=()=>{e.autoplay&&e.pauseOnHover&&clearTimeout(r)},H=()=>{e.autoplay&&e.pauseOnHover&&(clearTimeout(r),r=setTimeout(()=>f(),e.interval))};t.watch(()=>e.autoplay,l=>{l?r=setTimeout(()=>f(),e.interval):clearTimeout(r)});const N=()=>{document.visibilityState==="hidden"&&clearTimeout(r),document.visibilityState==="visible"&&e.autoplay&&(r=setTimeout(()=>f(),e.interval))};return t.onMounted(()=>{t.nextTick(()=>{s.value!==null&&(o.value=s.value.clientWidth),e.autoplay&&(r=setTimeout(()=>f(),e.interval)),document.addEventListener("visibilitychange",N)})}),t.onUnmounted(()=>{clearTimeout(r),document.removeEventListener("visibilitychange",N)}),{prev:u,next:f,enter:_,leave:H,layout:y,viewportDOMRef:s,hasLeftSlot:n.slots.left!==void 0,hasRightSlot:n.slots.right!==void 0,isLeftArrowVisiable:S,isRightArrowVisiable:A,activeIndex:m,items:a}}}),K="",V=(e,n)=>{const s=e.__vccOpts||e;for(const[a,p]of n)s[a]=p;return s},U=e=>(i.pushScopeId("data-v-d65c36fb"),e=e(),i.popScopeId(),e),x={key:1,class:"split-carousel__left-button"},P=[U(()=>i.createElementVNode("div",{class:"arrow left"},null,-1))],L={key:1,class:"split-carousel__right-button"},O=[U(()=>i.createElementVNode("div",{class:"arrow right"},null,-1))];function j(e,n,s,a,p,h){return i.openBlock(),i.createElementBlock("div",{class:"split-carousel",style:i.normalizeStyle({height:`${typeof e.height=="string"?e.height:`${e.height}px`}`})},[i.createElementVNode("div",{class:"split-carousel__left",onClick:n[0]||(n[0]=(...o)=>e.prev&&e.prev(...o))},[i.withDirectives(i.createElementVNode("div",null,[e.hasLeftSlot?i.renderSlot(e.$slots,"left",{key:0},void 0,!0):(i.openBlock(),i.createElementBlock("button",x,P))],512),[[i.vShow,e.isLeftArrowVisiable]])]),i.createElementVNode("div",{ref:"viewportDOMRef",class:i.normalizeClass(["split-carousel__viewport",{"split-carousel__viewport--static":e.layout.isStatic}]),onMouseenter:n[1]||(n[1]=(...o)=>e.enter&&e.enter(...o)),onMouseleave:n[2]||(n[2]=(...o)=>e.leave&&e.leave(...o))},[i.renderSlot(e.$slots,"default",{},void 0,!0)],34),i.createElementVNode("div",{class:"split-carousel__right",onClick:n[3]||(n[3]=(...o)=>e.next&&e.next(...o))},[i.withDirectives(i.createElementVNode("div",null,[e.hasRightSlot?i.renderSlot(e.$slots,"right",{key:0},void 0,!0):(i.openBlock(),i.createElementBlock("button",L,O))],512),[[i.vShow,e.isRightArrowVisiable]])])],4)}const E=V(R,[["render",j],["__scopeId","data-v-d65c36fb"]]),q=t.defineComponent({name:"SplitCarouselItem",setup(){let e=t.getCurrentInstance(),n=Math.random();const s=t.inject("injectCarouselScope"),a=t.ref(!1);if(!e||!s)throw new Error("SplitCarouselItem Must include by SplitCarousel");const{layout:p,stag:h,reset:o,addItem:y,removeItem:m}=s;t.onMounted(()=>{y({uid:n}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{a.value=!0})})}),t.onUnmounted(()=>{m(n)});const w=t.computed(()=>n===h.value.prependUid),g=t.computed(()=>n===h.value.appendUid),C=t.computed(()=>h.value.stagUids.findIndex(S=>S===n)),v=t.computed(()=>C.value!==-1),$=t.computed(()=>!!(!a.value||o.resetting));return{itemStyle:t.computed(()=>{const{itemWidth:S,isStatic:A,itemBlockWidth:I,appendPostion:r,prependPosition:f}=p.value;let u={width:`${S}px`,transitionDuration:`${$.value?0:s.speed.value}ms`,transitionTimingFunction:s.timingFunction.value};if(A)return u.display="block",u;if(v.value&&(u={...u,display:"block",transform:`translateX(${C.value*I}px)`}),w.value){const _=o.resetting&&o.action==="next";u={...u,display:"block",transform:`translateX(${_?r:f}px)`}}if(g.value){const _=o.resetting&&o.action==="prev";u={...u,display:"block",transform:`translateX(${_?f:r}px)`}}return u}),layout:p}}}),Z="";function D(e,n,s,a,p,h){return i.openBlock(),i.createElementBlock("div",{class:i.normalizeClass(["split-carousel__item",{"split-carousel__item--transition":!e.layout.isStatic}]),style:i.normalizeStyle(e.itemStyle)},[i.renderSlot(e.$slots,"default",{},void 0,!0)],6)}const B=V(q,[["render",D],["__scopeId","data-v-e39df7ff"]]),z=(e,n)=>{const s=(n==null?void 0:n.prefix)||"";e.component(`${s}SplitCarousel`,E),e.component(`${s}SplitCarouselItem`,B)};c.SplitCarousel=E,c.SplitCarouselItem=B,c.install=z,Object.defineProperty(c,Symbol.toStringTag,{value:"Module"})});
