{"version":3,"file":"vue-split-carousel.es.js","sources":["../src/components/SplitCarousel.vue","../src/components/SplitCarouselItem.vue","../src/bundle-entry.ts"],"sourcesContent":["<script lang=\"ts\">\nimport type { ComputedRef } from 'vue-demi'\nimport {\n  computed,\n  defineComponent,\n  nextTick,\n  onMounted,\n  onUnmounted,\n  provide,\n  reactive,\n  ref,\n  toRefs,\n  watch,\n} from 'vue-demi'\nimport type {\n  CarouselItem,\n  CarouselLayout,\n  CarouselReset,\n  ComponentUid,\n  InjectCarouselScope,\n} from './carousel'\n\nexport default defineComponent({\n  name: 'SplitCarousel',\n  props: {\n    autoplay: {\n      type: Boolean,\n      default: true,\n    },\n    speed: {\n      type: Number,\n      default: 500,\n    },\n    interval: {\n      type: Number,\n      default: 3000,\n    },\n    loop: {\n      type: Boolean,\n      default: true,\n    },\n    displayAmount: {\n      type: Number,\n      default: 4,\n    },\n    height: {\n      type: [Number, String],\n      default: 80,\n    },\n    itemWidth: {\n      type: Number,\n      default: 120,\n    },\n    pauseOnHover: {\n      type: Boolean,\n      default: true,\n    },\n    timingFunction: {\n      type: String,\n      default: 'ease',\n    },\n    arrowVisible: {\n      type: String,\n      validator: (i: string) => ['default', 'always'].includes(i),\n      default: 'default',\n    },\n  },\n  setup(props, context) {\n    const viewportDOMRef = ref<null | HTMLElement>(null)\n\n    const items = ref<CarouselItem[]>([])\n    const addItem = (item: CarouselItem) => items.value.push(item)\n    const removeItem = (uid: ComponentUid) => {\n      const index = items.value.findIndex(item => item.uid === uid)\n      if (index !== -1)\n        items.value.splice(index, 1)\n    }\n    // layout\n    const viewportWidth = ref(0)\n    const layout: ComputedRef<CarouselLayout> = computed(() => {\n      const gapWidth\n        = (viewportWidth.value - props.itemWidth * props.displayAmount)\n        / (props.displayAmount - 1)\n      const itemBlockWidth = gapWidth + props.itemWidth\n      return {\n        isStatic: items.value.length <= props.displayAmount,\n        gapWidth,\n        viewportWidth: viewportWidth.value,\n        itemWidth: props.itemWidth,\n        itemBlockWidth,\n        prependPosition: -1 * itemBlockWidth,\n        appendPostion: viewportWidth.value + gapWidth,\n      }\n    })\n\n    // index\n    const activeIndex = ref(0)\n    const isLastIndex = computed(\n      () => activeIndex.value + props.displayAmount === items.value.length,\n    )\n    const isFirstIndex = computed(() => activeIndex.value === 0)\n    const isNeedReset = computed(\n      () => props.displayAmount + 2 >= items.value.length,\n    )\n    const reset = reactive<CarouselReset>({\n      resetting: false,\n      action: 'next',\n    })\n\n    const stag = computed(() => {\n      const index = activeIndex.value\n      const list = items.value\n      const endIndex = list.length - 1\n\n      const stagUids = Array.from({ length: props.displayAmount }).map(\n        (v, offset) => list[(index + offset) % list.length]?.uid,\n      )\n\n      const result = {\n        prependUid: list[isFirstIndex.value ? endIndex : index - 1]?.uid,\n        stagUids,\n        appendUid: list[(index + props.displayAmount) % list.length]?.uid,\n      }\n      if (result.prependUid === result.appendUid) {\n        const invalidUid = -1\n        if (reset.action === 'prev')\n          result.prependUid = invalidUid\n\n        if (reset.action === 'next')\n          result.appendUid = invalidUid\n      }\n      return result\n    })\n    const refsProps = toRefs(props)\n    provide<InjectCarouselScope>('injectCarouselScope', {\n      speed: refsProps.speed,\n      timingFunction: refsProps.timingFunction,\n      stag,\n      reset,\n      addItem,\n      removeItem,\n      layout,\n    })\n\n    // arrow\n    const isLeftArrowVisiable = computed(() => {\n      if (props.arrowVisible === 'default') {\n        if (layout.value.isStatic)\n          return false\n\n        if (isFirstIndex.value && !props.loop)\n          return false\n      }\n      return true\n    })\n    const isRightArrowVisiable = computed(() => {\n      if (props.arrowVisible === 'default') {\n        if (layout.value.isStatic)\n          return false\n\n        if (isLastIndex.value && !props.loop)\n          return false\n      }\n      return true\n    })\n\n    // play method\n    const slide = (action: CarouselReset['action']) => {\n      if (layout.value.isStatic)\n        return\n      if (!props.loop) {\n        if (action === 'next' && isLastIndex.value)\n          return\n        if (action === 'prev' && isFirstIndex.value)\n          return\n      }\n\n      const setIndex = () => {\n        if (action === 'next')\n          activeIndex.value = (activeIndex.value + 1) % items.value.length\n\n        if (action === 'prev') {\n          activeIndex.value = isFirstIndex.value\n            ? items.value.length - 1\n            : activeIndex.value - 1\n        }\n      }\n\n      if (!isNeedReset.value) {\n        setIndex()\n        return\n      }\n\n      reset.resetting = true\n      reset.action = action\n      requestAnimationFrame(() => {\n        // this frame setting edge item position\n        requestAnimationFrame(() => {\n          reset.resetting = false\n          setIndex()\n        })\n      })\n    }\n    let timer: ReturnType<typeof setTimeout>\n    const next = () => {\n      clearTimeout(timer)\n      slide('next')\n      if (props.autoplay)\n        timer = setTimeout(() => next(), props.interval)\n    }\n    const prev = () => {\n      clearTimeout(timer)\n      slide('prev')\n      if (props.autoplay)\n        timer = setTimeout(() => prev(), props.interval)\n    }\n    const enter = () => {\n      if (props.autoplay && props.pauseOnHover)\n        clearTimeout(timer)\n    }\n    const leave = () => {\n      if (props.autoplay && props.pauseOnHover) {\n        clearTimeout(timer)\n        timer = setTimeout(() => next(), props.interval)\n      }\n    }\n\n    // autoplay\n    watch(\n      () => props.autoplay,\n      (autoplay) => {\n        if (autoplay)\n          timer = setTimeout(() => next(), props.interval)\n        else\n          clearTimeout(timer)\n      },\n    )\n    const handlePageVisiblityChange = () => {\n      if (document.visibilityState === 'hidden')\n        clearTimeout(timer)\n\n      if (document.visibilityState === 'visible' && props.autoplay)\n        timer = setTimeout(() => next(), props.interval)\n    }\n\n    // init layout,handle page visibility\n    onMounted(() => {\n      nextTick(() => {\n        if (viewportDOMRef.value !== null)\n          viewportWidth.value = viewportDOMRef.value.clientWidth\n\n        if (props.autoplay)\n          timer = setTimeout(() => next(), props.interval)\n\n        document.addEventListener(\n          'visibilitychange',\n          handlePageVisiblityChange,\n        )\n      })\n    })\n    onUnmounted(() => {\n      clearTimeout(timer)\n\n      document.removeEventListener(\n        'visibilitychange',\n        handlePageVisiblityChange,\n      )\n    })\n\n    return {\n      prev,\n      next,\n      enter,\n      leave,\n      layout,\n      viewportDOMRef,\n      hasLeftSlot: context.slots.left !== undefined,\n      hasRightSlot: context.slots.right !== undefined,\n      isLeftArrowVisiable,\n      isRightArrowVisiable,\n    }\n  },\n})\n</script>\n\n<template>\n  <div\n    class=\"split-carousel\"\n    :style=\"{\n      height: `${typeof height === 'string' ? height : `${height}px`}`,\n    }\"\n  >\n    <div class=\"split-carousel__left\" @click=\"prev\">\n      <div v-show=\"isLeftArrowVisiable\">\n        <slot v-if=\"hasLeftSlot\" name=\"left\" />\n        <button v-else class=\"split-carousel__left-button\">\n          <div class=\"arrow left\" />\n        </button>\n      </div>\n    </div>\n    <div\n      ref=\"viewportDOMRef\"\n      class=\"split-carousel__viewport\"\n      :class=\"{ 'split-carousel__viewport--static': layout.isStatic }\"\n      @mouseenter=\"enter\"\n      @mouseleave=\"leave\"\n    >\n      <slot />\n    </div>\n    <div class=\"split-carousel__right\" @click=\"next\">\n      <div v-show=\"isRightArrowVisiable\">\n        <slot v-if=\"hasRightSlot\" name=\"right\" />\n        <button v-else class=\"split-carousel__right-button\">\n          <div class=\"arrow right\" />\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.split-carousel {\n  display: flex;\n  width: 100%;\n  align-items: center;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  &__viewport {\n    flex-grow: 1;\n    overflow: hidden;\n    align-self: stretch;\n    position: relative;\n    &--static {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      :deep(.split-carousel__item) {\n        align-self: stretch;\n      }\n    }\n  }\n  &__left,\n  &__right {\n    align-self: center;\n    padding: 5px;\n  }\n  &__left-button,\n  &__right-button {\n    height: 30px;\n    width: 30px;\n    text-align: center;\n    line-height: 30px;\n    border: 1px solid #dcdfe6;\n    border-radius: 50%;\n    cursor: pointer;\n    background-color: #fff;\n    transition: border-color, background-color 0.15s;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    &:hover {\n      border-color: #c6e2ff;\n      background-color: #ecf5ff;\n      .arrow {\n        border-top-color: #c6e2ff;\n        border-left-color: #c6e2ff;\n      }\n    }\n  }\n}\n.arrow {\n  height: 6px;\n  width: 6px;\n  border: 2px solid;\n  transition: border-color 0.15s;\n  border-top-color: #dcdfe6;\n  border-left-color: #dcdfe6;\n  border-right-color: transparent;\n  border-bottom-color: transparent;\n  &.left {\n    transform: translateX(2px) rotate(-45deg);\n  }\n  &.right {\n    transform: translateX(-2px) rotate(135deg);\n  }\n}\n</style>\n","<script lang=\"ts\">\nimport type { ComponentInternalInstance } from 'vue-demi'\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  inject,\n  onMounted,\n  onUnmounted,\n  ref,\n} from 'vue-demi'\nimport type { ComponentStyle, InjectCarouselScope } from './carousel'\n\nexport default defineComponent({\n  name: 'SplitCarouselItem',\n  setup() {\n    const instance = getCurrentInstance() as ComponentInternalInstance\n    const injectCarouselScope: InjectCarouselScope = inject(\n      'injectCarouselScope',\n    ) as InjectCarouselScope\n    const isMounted = ref(false)\n\n    if (!instance || !injectCarouselScope)\n      throw new Error('SplitCarouselItem Must include by SplitCarousel')\n\n    const { layout, stag, reset, addItem, removeItem } = injectCarouselScope\n    // register/unregister\n    onMounted(() => {\n      addItem({ uid: instance.uid })\n      requestAnimationFrame(() => {\n        requestAnimationFrame(() => {\n          isMounted.value = true\n        })\n      })\n    })\n    onUnmounted(() => {\n      removeItem(instance.uid)\n    })\n\n    // itemStyle\n    const isPrepend = computed(() => instance.uid === stag.value.prependUid)\n    const isAppend = computed(() => instance.uid === stag.value.appendUid)\n    const stagIndex = computed(() => {\n      return stag.value.stagUids.findIndex(uid => uid === instance.uid)\n    })\n\n    const inStag = computed(() => stagIndex.value !== -1)\n    const noAnimate = computed(() => {\n      if (!isMounted.value)\n        return true\n\n      if (reset.resetting)\n        return true\n\n      return false\n    })\n\n    const itemStyle = computed(() => {\n      const {\n        itemWidth,\n        isStatic,\n        itemBlockWidth,\n        appendPostion,\n        prependPosition,\n      } = layout.value\n\n      let style: ComponentStyle = {\n        width: `${itemWidth}px`,\n        transitionDuration: `${noAnimate.value ? 0 : injectCarouselScope.speed.value\n          }ms`,\n        transitionTimingFunction: injectCarouselScope.timingFunction.value,\n      }\n\n      if (isStatic) {\n        style.display = 'block'\n        return style\n      }\n\n      if (inStag.value) {\n        style = {\n          ...style,\n          display: 'block',\n          transform: `translateX(${stagIndex.value * itemBlockWidth}px)`,\n        }\n      }\n      if (isPrepend.value) {\n        const needReset = reset.resetting && reset.action === 'next'\n        style = {\n          ...style,\n          display: 'block',\n          transform: `translateX(${needReset ? appendPostion : prependPosition\n            }px)`,\n        }\n      }\n      if (isAppend.value) {\n        const needReset = reset.resetting && reset.action === 'prev'\n        style = {\n          ...style,\n          display: 'block',\n          transform: `translateX(${needReset ? prependPosition : appendPostion\n            }px)`,\n        }\n      }\n\n      return style\n    })\n\n    return {\n      itemStyle,\n      layout,\n    }\n  },\n})\n</script>\n\n<template>\n  <div class=\"split-carousel__item\" :class=\"{ 'split-carousel__item--transition': !layout.isStatic }\" :style=\"itemStyle\">\n    <slot />\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.split-carousel__item {\n  display: none;\n  transition-property: transform;\n  will-change: transfrom;\n\n  &--transition {\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 100%;\n  }\n\n  &--stag {\n    display: block;\n  }\n}\n</style>\n","import type { App } from 'vue';\nimport SplitCarousel from './components/SplitCarousel.vue';\nimport SplitCarouselItem from './components/SplitCarouselItem.vue';\n\ninterface SplitCarouselOption {\n  prefix: string;\n}\n\nconst install = (app: App, option?: SplitCarouselOption): void => {\n  const prefix = option?.prefix || '';\n  app.component(`${prefix}SplitCarousel`, SplitCarousel);\n  app.component(`${prefix}SplitCarouselItem`, SplitCarouselItem);\n};\n\nexport { SplitCarousel, SplitCarouselItem, install };\n"],"names":["_sfc_main$1","defineComponent","i","props","context","viewportDOMRef","ref","items","addItem","item","removeItem","uid","index","viewportWidth","layout","computed","gapWidth","itemBlockWidth","activeIndex","isLastIndex","isFirstIndex","isNeedReset","reset","reactive","stag","list","endIndex","stagUids","v","offset","_a","result","_b","refsProps","toRefs","provide","isLeftArrowVisiable","isRightArrowVisiable","slide","action","setIndex","timer","next","prev","enter","leave","watch","autoplay","handlePageVisiblityChange","onMounted","nextTick","onUnmounted","_hoisted_1","_hoisted_2","_withScopeId","_createElementVNode","_hoisted_4","_hoisted_5","_sfc_render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","args","_renderSlot","_hoisted_3","_normalizeClass","_hoisted_6","_sfc_main","instance","getCurrentInstance","injectCarouselScope","inject","isMounted","isPrepend","isAppend","stagIndex","inStag","noAnimate","itemWidth","isStatic","appendPostion","prependPosition","style","needReset","_normalizeStyle","install","app","option","prefix","SplitCarousel","SplitCarouselItem"],"mappings":"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"}